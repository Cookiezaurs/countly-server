<div v-bind:class="[componentId]" class="configurations">
    <cly-header>
        <template v-slot:header-left>
            <h2 class="bu-mb-4"> SDK Configuration </h2>
        </template>
    </cly-header>
    <cly-main class="bu-pt-4">
        <div v-if="!isTableLoading" class="bu-columns bu-is-gapless">
            <div class="bu-column bu-is-12 selected-config">
                <form>
                    <div :id="group.label" :key="index" v-for="(group, index) in groups">
                        <h3 v-if="group.label" class="bu-my-4"> 
                            {{group.label}}
                            <cly-tooltip-icon class="ion ion-help-circled" placement="bottom"></cly-tooltip-icon>
                        </h3>
                        <cly-section class="bu-mr-5">
                            <template slot-scope="scope">
                                <div 
                                    v-for="key in group.list" :key="key" :set="config = getData[key]"
                                    class="bu-columns bu-is-vcentered bu-p-5 config-section">
                                    <div class="bu-column bu-is-7">
                                        <p class="bu-has-text-weight-medium">{{config.name}}</p>
                                        <p class="bu-has-text-weight-normal bu-mt-2" v-html="config.description" v-if="config.description"></p>
                                    </div>
                                    <div class="bu-column bu-is-2"></div>
                                    <div class="bu-column bu-is-3 bu-is-flex bu-is-justify-content-end">
                                            <div 
                                                v-if="config.type === 'function'" 
                                                v-html="config.render(config)">
                                            </div>
                                            <el-input
                                                v-else-if="config.type === 'text'" 
                                                @input="onChange(key, $event)"
                                                :value="config.value || config.default"
                                                v-bind="config.attrs"
                                                >
                                            </el-input>
                                            <el-select 
                                                v-else-if="config.type === 'select'" 
                                                @change="onChange(key, $event)"
                                                :value="config.value || config.default"
                                                v-bind="config.attrs">
                                                <el-option :key="option.value" :value="option.value" :label="option.label" v-for="option in config.list"></el-option>
                                            </el-select>
                                            <el-slider 
                                                v-else-if="config.type === 'slider'" 
                                                @change="onChange(key, $event)"
                                                :value="config.value || config.default"
                                                v-bind="config.attrs">
                                            </el-slider>
                                            <el-button
                                                v-else-if="config.type === 'button'" 
                                                @click="config.click()"
                                                v-bind="config.attrs">
                                                {{config.name}}
                                            </el-button>
                                            <el-switch 
                                                v-else-if="config.type === 'switch'"
                                                @change="onChange(key, $event)"
                                                v-model="config.value"
                                                v-bind="config.attrs">
                                            </el-switch>
                                            <el-input-number 
                                                v-else-if="config.type === 'number'" 
                                                @change="onChange(key, $event)"
                                                :max='2147483647' 
                                                :min='0' 
                                                :value="config.value || config.default"
                                                v-bind="config.attrs">
                                            </el-input-number>
                                            <cly-colorpicker 
                                                v-else-if="config.type === 'colorpicker'" 
                                                :value="config.value || config.default"
                                                @change="onChange(key, config)"
                                                v-bind="config.attrs"
                                                style="display:inline">
                                            </cly-colorpicker>
                                            <el-upload
                                                v-else-if="config.type === 'image'" 
                                                :show-file-list="false"
                                                :before-upload="config.before"
                                                :on-success="config.success"
                                                :on-error="config.error"
                                                v-bind="config.attrs">
                                                <div :class="config.image_size">
                                                    <div v-if="config.value" class="image-delete bu-is-flex">
                                                        <el-button 
                                                        size="small" 
                                                        type="text" 
                                                        @click.stop="onChange(key, '')"
                                                        class="bu-p-0">{{i18n('management-users.delete-logo')}}</el-button>
                                                        <img :src="config.value + '?' + Date.now()">
                                                    </div>
                                                    <div v-else class="bu-is-flex">
                                                        <el-button type="default" style="display:flex;margin:auto;">{{i18n('white-labeling.choose-file')}}</el-button>
                                                        <el-button type="default" disabled style="width: 165px;height: 50px;cursor: default;">{{i18n('white-labeling.logo-preview')}}</el-button>
                                                    </div>
                                                </div>
                                                <span class="config-error">{{config.errorMessage || ""}}</span>
                                            </el-upload>
                                            <el-input 
                                                v-else
                                                @input="onChange(key, $event)"
                                                :value="config.value || config.default">
                                            </el-input>
                                        </div>
                                        </div>
                                    </template>
                                </cly-section>
                            </div>
                        </form>
                    </div>
                </div>
        <cly-diff-helper :diff="diff" @discard="unpatch" @save="save"></cly-diff-helper>
    </cly-main>
</div>
